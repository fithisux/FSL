<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Formats</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="fsl/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="fsl/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="fsl/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">Formats</a>
</ul>
<br><br>
[<a href="FSL.html">FSL</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="NIFTI-1_Data_Format_and_Orientation_Conventions">NIFTI-1 Data Format and Orientation Conventions</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line862">FSL now uses the new <a class="http" href="http://nifti.nimh.nih.gov/dfwg/">NIFTI-1</a> data format by default, though it can still read and, in limited cases, write "old" Analyze files. The options are: <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><ul><li>ANALYZE - traditional .hdr and .img file pair (header information and image data respectively) using the ANALYZETM 7.5 file format <span class="anchor" id="line-6"></span></li><li>ANALYZE_GZ - same but the files are written to disk already compressed using the gzip library (saves disk space) <span class="anchor" id="line-7"></span></li><li>NIFTI_PAIR - the new NIFTI-1 format, still using a .hdr and .img file pair for each 3D/4D image <span class="anchor" id="line-8"></span></li><li>NIFTI - the NIFTI-1 format but in a single .nii file (which has the header information at the start of the file, followed by the image data) <span class="anchor" id="line-9"></span></li><li><p class="line862">NIFTI_GZ &amp; NIFTI_PAIR_GZ - as above but with files written to disk already compressed. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></li></ul><p class="line862">By default, FSL programs use the NIFTI_GZ format, i.e. single-file NIFTI-1 compressed images. You control which NIFTI format FSL programs write using FSL setup files (see <a href="./FslInstallation.html">downloading and installing</a> for more details). <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line874">FSL can automatically read any of the above formats, regardless of what output type has been set. However, FSL programs will generally complain and quit if you have an input image present in more than one format - for example, fmridata.hdr/fmridata.img and fmridata.nii.gz present in the same directory. If you want to bypass this safety-checking you can set the environment variable FSLMULTIFILEQUIT to FALSE (see above on FSL setup files). <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line862">NIFTI allows the left-right orientation of your data to be specified in the file. This is separate from how it is displayed in FSLView. However, the FSLView labels should <strong>always</strong> be in the correct places. If they are wrong (or missing) then we suggest that the conversion to the NIfTI be investigated and fixed or a different method used such that the labels are correct. There is no point in continuing with any analysis if the initial labels are incorrect. Note that to distinguish left from right just by looking at the image is normally impossible and would require a marker (e.g. a vitamin capsule) to be present when acquiring the images. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line874">The data stored on disk (in the NIfTI file) can be in either "radiological" or "neurological" order, depending on information stored in the qform and sform fields of the NIfTI header. It is no longer necessary to be concerned what this order is. All FSL tools will work regardless of the order. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line862">Analyze images are treated as radiologically ordered in FSL but <strong>should be avoided</strong> whenever possible as they do not allow proper orientation information to be stored. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">FSLView always displays images in radiological convention when possible. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line874">NIFTI "sform" information (when present) is copied from the reference image when using Flirt to calculate or apply a registration. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line874">NIFTI "qform" information (should be) transformed from the input image and not copied from the reference image. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line874">All other programs should preserve the sform and qform information (or arbitrarily take it from one input if it is a process that combines many inputs) <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line874">fslcpgeom can be used to copy this info (plus voxel dims) from one image to another. <span class="anchor" id="line-30"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2014-07-08 15:33
</body>
</html>
