<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>FslInstallation/Windows</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="fsl/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="fsl/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="fsl/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">FslInstallation/Windows</a>
</ul>
<br><br>
[<a href="FSL.html">FSL</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"><div class="FslToolContents">
<h1>Contents</h1>
<ol><li><a href="./FslInstallation.html">Introduction</a></li><li><a href="./FslInstallation(2f)MacOsX.html">Mac Os X</a></li><li><a href="./FslInstallation(2f)Linux.html">Linux</a></li><li>Windows<div class="contentslist"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Introduction">Introduction</a></li><li>
<a href="#System_Requirements">System Requirements</a></li><li>
<a href="#Dependencies">Dependencies</a></li><li>
<a href="#The_FSL_Virtual_Machine">The FSL Virtual Machine</a><ol><li>
<a href="#Verifying_the_download">Verifying the download</a><ol><li>
<a href="#Using_MD5summer">Using MD5summer</a></li></ol></li></ol></li><li>
<a href="#FSLvm_Installation">FSLvm Installation</a></li><li>
<a href="#VMware_Player_Usage_and_Configuration">VMware Player Usage and Configuration</a><ol><li>
<a href="#Initial_setup">Initial setup</a></li><li>
<a href="#Installing_FSL">Installing FSL</a></li></ol></li><li>
<a href="#Accessing_your_Windows_files">Accessing your Windows files</a></li><li>
<a href="#Network_access">Network access</a></li><li>
<a href="#Shutting_down">Shutting down</a></li><li>
<a href="#Resetting_a_hung_FSLvm">Resetting a hung FSLvm</a></li><li>
<a href="#Updating_the_FSLvm">Updating the FSLvm</a></li><li>
<a href="#Increasing_the_amount_of_memory_available_to_FSLvm">Increasing the amount of memory available to FSLvm</a></li></ol></div></div></li><li><a href="./FslInstallation(2f)SourceCode.html">Source Code</a></li><li><a href="./FslInstallation(2f)ShellSetup.html">Shell Setup</a></li><li><a href="./FslInstallation(2f)Faq.html">FAQ</a></li></ol></div> <span class="anchor" id="line-2"></span>
<h1 id="Introduction">Introduction</h1>
<span class="anchor" id="line-3"></span><p class="line874">We recommend using a UNIX-based computer (such as a Linux PC or Apple OS X) for carrying out data analysis. However, if this is not available then you can use FSL on a Microsoft Windows computer by running the Linux version of FSL inside a "virtual Linux machine" (a VM), using a freely available program (free for non-commercial use only) called 'VMware Player' by VMware. This is fairly easy to setup, and we provide basic installation instructions below, but please note that we cannot in general offer further help for the setup and maintenance of the virtual machine itself - we just offer support on the running of FSL within it. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h1 id="System_Requirements">System Requirements</h1>
<span class="anchor" id="line-6"></span><ul><li>Windows Vista or 7 (32bit or 64bit) <span class="anchor" id="line-7"></span></li><li>Dual core CPU/ multiple CPU recommended <span class="anchor" id="line-8"></span></li><li>4GB RAM minimum <span class="anchor" id="line-9"></span></li><li>Minimum 10GB, up to 50GB, of free disc space (VM image expands as necessary up to the 50GB limit) <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></li></ul><p class="line867">
<h1 id="Dependencies">Dependencies</h1>
<span class="anchor" id="line-12"></span><p class="line862">The software package <tt class="backtick">VMware&nbsp;Player</tt> emulates the core hardware of a PC allowing you to run a second operating system 'in a window'. Virtualisation technology allows the programs running in this VM to achieve speeds approaching that of programs running natively in Windows. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line874">The FSL VM (FSLvm) is configured with 2GB of RAM, a virtual hard disk that can grow to 50GB in size, shared (NAT) networking (ie it shares the network connection of your local computer), virtual sound hardware and virtual CD/DVD drive. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line862">Before you can run the FSL virtual machine, you need to install a Virtual Machine player package. We support the use of version 4.x+ of VMware's free <a class="http" href="http://www.vmware.com/products/player/">VMware Player</a> software. Download the software from VMware's site and install this package by following VMware's instructions. Once it is installed and your computer has been restarted, launch VMware Player to complete initial setup. <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
<h1 id="The_FSL_Virtual_Machine">The FSL Virtual Machine</h1>
<span class="anchor" id="line-19"></span><p class="line862">Once VMware Player is installed, download FSLvm from below. The FSLvm is compatible with Windows Vista/7 and is 64 bit, so requires a 64 bit CPU. See <a class="http" href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1003945">http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1003945</a> for information on how to check that your computer will be able to run the FSLvm. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><div><table class="centred" style="text-align: center;"><tbody><tr>  <td style="border: none;"><p class="line891"><a class="http" href="http://www.fmrib.ox.ac.uk/fsldownloads/FSLVm6_64.zip">FSLvm</a></td>
</tr>
</tbody></table></div><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line867">
<h2 id="Verifying_the_download">Verifying the download</h2>
<span class="anchor" id="line-24"></span><p class="line862">To confirm that the FSLvm package has downloaded correctly, download the appropriate MD5 hash file below to the same folder you downloaded the FSLvm to and use <a class="http" href="http://www.md5summer.org/">MD5summer</a> to check the files. <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><div><table class="centred" style="text-align: center;"><tbody><tr>  <td style="border: none;"><p class="line891"><a class="http" href="http://www.fmrib.ox.ac.uk/fsldownloads/md5sums/FSLVm6_64.zip.md5">FSLvm MD5 sum</a></td>
</tr>
</tbody></table></div><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line867">
<h3 id="Using_MD5summer">Using MD5summer</h3>
<span class="anchor" id="line-29"></span><p class="line862">Run md5summer once as an administrator and choose to associate the <tt class="backtick">.md5</tt> extension with md5summer. Now double click on the downloaded md5 sum file and wait while md5summer checks the file, a green circle to the left of the file name confirms the file's integrity. <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line867">
<h1 id="FSLvm_Installation">FSLvm Installation</h1>
<span class="anchor" id="line-32"></span><p class="line867"><img align="right" alt="Extract all files" class="attachment" src="attachments/FslInstallation(2f)Windows/extract_all_files_vista.jpg" title="Extract all files" /> <span class="anchor" id="line-33"></span>FSLvm is a fairly minimal install of the CentOS 6 Linux distribution and is provided as a zip file. To install, decompress the downloaded FSLvm by double clicking on the zip file and clicking on <tt class="backtick">Extract&nbsp;all&nbsp;files</tt> in the resulting Windows Explorer window. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line862">The Windows zip expansion wizard will launch. Extract the files to an appropriate location; removing the <tt class="backtick">FSLVm6_64</tt> from the end of the expansion location (if you forget this you will end up with <tt class="backtick">FSLVm6_64</tt> within a <tt class="backtick">FSLVm6_64</tt> folder!). <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line867">
<h1 id="VMware_Player_Usage_and_Configuration">VMware Player Usage and Configuration</h1>
<span class="anchor" id="line-38"></span><p class="line862">Detailed VMware Player application usage instructions are available from the VMware Player menu's <tt class="backtick">Help</tt> entry. <span class="anchor" id="line-39"></span>
<h2 id="Initial_setup">Initial setup</h2>
<span class="anchor" id="line-40"></span><p class="line867"><img align="right" alt="VMX file icon" class="attachment" src="attachments/FslInstallation(2f)Windows/vmx_file.jpg" title="VMX file icon" />Now that the FSLvm is installed, launch VMware Player from the Start menu and click on the <tt class="backtick">Open</tt> icon. In the <tt class="backtick">Open</tt> dialogue, browse to the uncompressed FSLvm folder, <tt class="backtick">FSLVm6_64</tt> and double click on the <tt class="backtick">FSLVm6_64</tt> file whose icon consists of cyan interlocking squares (the virtual machine configuration file). <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line862">Subsequent to the initial launch, the FSLvm will appear in the list of <tt class="backtick">Recent&nbsp;Virtual&nbsp;Machines</tt> allowing quick launching. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line874">During the launch of a VM you may be prompted to download and upgrade the VMware Tools (updates for these appear periodically). <span class="anchor" id="line-45"></span><object data="/fsl/fslwiki/attachement%3AVMtoolsupdate1.png?action=content" type="text/html" width="100%">Request to update tools</object> <span class="anchor" id="line-46"></span>You should agree to this, then can upgrade the tools using the <a href="./FslInstallation(2f)Windows.html#toolsupgrade">instructions</a> below once you have got FSL installed. <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line862">The first time FSLvm is started VMware Player will ask if the VM was moved or copied, choose <tt class="backtick">I&nbsp;copied&nbsp;it</tt> (this sets up the network correctly). <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line874">Depending on your Windows computer's hardware, you may also receive additional messages like... <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><pre><span class="anchor" id="line-1"></span>Cannot connect virtual device IDE 1:0. No corresponding device is available on the host. Would you like an attempt to be made to connect the virtual device every time you power on the virtual machine? </pre><span class="anchor" id="line-54"></span><p class="line862">This means that VMware Player cannot locate a CD ROM drive. Choose <tt class="backtick">No</tt> to dismiss this warning permanently. <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line874">The FSLvm will now boot, a process that may take several minutes. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><p class="line874">Once the boot process has completed, you will be presented with a graphical login screen. Log in as the 'FSL user' by clicking on the account name and entering the password <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><pre><span class="anchor" id="line-1-1"></span>fsluser</pre><span class="anchor" id="line-62"></span><p class="line874">After a few moments you will be presented with the Linux desktop environment. <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line867"><img align="right" alt="Linux keyboard layout configuration" class="attachment" src="attachments/FslInstallation(2f)Windows/CO6Keyboards.png" title="Linux keyboard layout configuration" />Before continuing, you should take a moment to verify that you have the correct keyboard layout. The FSLvm is configured with a British keyboard; users with a different keyboard layout can change by visiting <tt class="backtick">System</tt> &gt; <tt class="backtick">Preferences</tt> &gt; <tt class="backtick">Keyboard</tt> from the menu at the top of the screen. This will open the keyboard configuration window. Switch to the <tt class="backtick">Layouts</tt> tab and click the <tt class="backtick">Add</tt> button to add a keyboard layout. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line874">In the window that appears choose an appropriate country and variant for your computer's keyboard. <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><p class="line874">Once you have the correct keyboard layout, the first task you should undertake is to reset a few passwords to more secure values. <span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><p class="line874">Click on the Terminal icon in the menu bar (a dark grey square). In the terminal window that opens, type the following: <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><pre><span class="anchor" id="line-1-2"></span>passwd</pre><span class="anchor" id="line-74"></span><p class="line874">When prompted, enter the current password <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><pre><span class="anchor" id="line-1-3"></span>fsluser</pre><span class="anchor" id="line-78"></span><p class="line862">and then enter a new password, twice - choose a secure password (see this <a class="http" href="http://en.wikipedia.org/wiki/Password_strength">Wikipedia</a> entry for advice on password selection). <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line862">Next you will need to change the password of the <tt class="backtick">root</tt> user in the FSLvm, do this by issuing the following commands in a terminal window: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-1-1"></span><div class="highlight bash"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-3f85f721bad82702d5731fceaffe560941b7d144" lang="en"><span class="line"><span class="anchor" id="line-1-2"></span>/bin/su -</span>
</pre></div></div><span class="anchor" id="line-84"></span><p class="line874">Enter the current root password, <span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><pre><span class="anchor" id="line-1-4"></span>fslroot</pre><span class="anchor" id="line-88"></span><p class="line874">You are now the system Super User. To change this user's password type: <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-1-3"></span><div class="highlight bash"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-30274c47903bd1bac7633bbf09743149ebab805f" lang="en"><span class="line"><span class="anchor" id="line-1-4"></span>passwd</span>
</pre></div></div><span class="anchor" id="line-92"></span><p class="line874">Again, when prompted, enter a new password twice - choose a different secure password. <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><div class="important"><span class="anchor" id="line-1-5"></span><p class="line867"><strong>Important</strong> <span class="anchor" id="line-2-1"></span><span class="anchor" id="line-3-1"></span><p class="line874">Do not forget these passwords, as you will lose access to FSLvm and all the files stored within it without them. </div><span class="anchor" id="line-98"></span><p class="line874">Now type: <span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><pre><span class="anchor" id="line-1-5"></span>exit</pre><span class="anchor" id="line-102"></span><p class="line874">to return to the normal user account. <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><p class="line867">
<h2 id="Installing_FSL">Installing FSL</h2>
<span class="anchor" id="line-105"></span><p class="line874">You can now install FSL using the FSL installer. <span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><div class="note"><span class="anchor" id="line-1-6"></span><p class="line874">The installer requires internet access to download the FSL install package. </div><span class="anchor" id="line-109"></span><p class="line874">The virtual machine is supplied with the installer on the Desktop of the FSL user account.  <span class="anchor" id="line-110"></span>In the terminal type the following: <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-1-7"></span><div class="highlight bash"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-f5e727e4b906d8f6bbf9a4e8ca07d8ec03947e50" lang="en"><span class="line"><span class="anchor" id="line-1-8"></span><span class="ResWord">cd</span> ~/Desktop</span>
<span class="line"><span class="anchor" id="line-2-2"></span>python fslinstaller.py</span>
</pre></div></div><span class="anchor" id="line-115"></span><p class="line862">Hit return to accept the default install location (<tt class="backtick">/usr/local</tt>), when prompted enter the password for the <tt class="backtick">fsl</tt> account. Once the installer completes, log out inside the virtual machine (<tt class="backtick">System&nbsp;&gt;&nbsp;Log&nbsp;Out&nbsp;fsl...</tt> in the VMware Player window) and log back in to complete the setup process. <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><p class="line867">
<h1 id="Accessing_your_Windows_files">Accessing your Windows files</h1>
<span class="anchor" id="line-118"></span><p class="line874">There are four options for transferring/accessing files stored on your Windows disk into the FSLvm, presented in order of ease of use: <span class="anchor" id="line-119"></span><ol type="1"><li>Drag-and-drop <span class="anchor" id="line-120"></span><ul><li style="list-style-type:none">The VMware Player application supports the dragging and dropping of files from Windows into the FSLvm. To transfer files select them in the Windows Explorer and then drag them into your FSLvm window and drop in the folder you would like it to reside in (or onto the Desktop). <span class="anchor" id="line-121"></span></li></ul></li><li>VMware Player file sharing <span class="anchor" id="line-122"></span><p class="line891"><a class="nonexistent" href="" title="Upload new attachment &quot;VMwaresharedfolders.png&quot;"><img alt="" height="32" src="/fsl/wiki_static/fsl/img/attach.png" title="" width="32" /></a> <span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><p class="line862">Before changing the sharing settings first create a folder to share. Put this folder somewhere appropriate in your home folder. To enable sharing and to point it to this new folder, start up the FSLvm and visit the VMware Player menu and open the <tt class="backtick">Shared&nbsp;Folders...</tt> dialogue. <span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><p class="line862">To enable sharing permanently select the <tt class="backtick">Always&nbsp;Enabled</tt> radio button. Now select the pre-configured share and click on the <tt class="backtick">Properties</tt> button. This will open another dialogue box allowing you to change the name the share will appear as in Linux and to change the Windows file path for the shared folder. Click on the <tt class="backtick">Browse</tt> button and locate the folder you created earlier. <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><p class="line891"><img align="right" alt="Browse to the folder to share" class="attachment" src="attachments/FslInstallation(2f)Windows/browseforfoldertoshare.jpg" title="Browse to the folder to share" />Click on the <tt class="backtick">OK</tt> buttons to dismiss the dialogues. You should now restart your FSLvm (only necessary the first time you enable sharing) by choosing <tt class="backtick">System</tt> &gt; <tt class="backtick">Shutdown</tt> from the top menu bar in the Linux desktop and clicking on the <tt class="backtick">Reboot</tt> button when prompted on what to do. <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><p class="line862">You may now access files held within this shared folder through the path <tt class="backtick">/mnt/hgfs</tt>. To navigate there through the graphical file browser, double click on <tt class="backtick">Computer</tt> on the desktop and then, in the resulting window, double click on <tt class="backtick">Filesystem</tt>. This will open a folder showing the folder <tt class="backtick">/</tt> from where you can navigate to <tt class="backtick">mnt</tt> and then <tt class="backtick">hgfs</tt>. Within here will be the shared folder, named as specified in the <tt class="backtick">Shared&nbsp;Folders</tt> dialogue. <span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><div class="warning"><span class="anchor" id="line-1-9"></span><p class="line867"><strong>Warning</strong> <span class="anchor" id="line-2-3"></span><span class="anchor" id="line-3-2"></span><p class="line874">Do not attempt to modify the same files in this shared folder in both operating systems at once - bad things will happen! </div><span class="anchor" id="line-136"></span></li><li>Using external media: <span class="anchor" id="line-137"></span>If you connect a USB storage device whilst VMware Player is running and has the input focus it will allow Linux to see the storage device. In most cases it will automatically mount and an icon will appear on the Linux desktop. Linux has read-only support for NTFS, so you will need to create an ext3 (Linux support only) disk partition or use FAT32 format which can be read on both OSes. <span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><div class="note"><span class="anchor" id="line-1-10"></span><p class="line867"><strong>Note</strong> <span class="anchor" id="line-2-4"></span><span class="anchor" id="line-3-3"></span><p class="line874">FAT32 is not supported for storing files that you are actively accessing with the FSL tools. </div><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span></li></ol><p class="line867">
<h1 id="Network_access">Network access</h1>
<span class="anchor" id="line-145"></span><p class="line862">The FSLvm is configured to share your network connection, and so has full access to any networks that your Windows computer can see. You can also access your FSLvm from Windows over this internal network with tools like <a class="http" href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">puTTY</a> (a SSH terminal client). <span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><p class="line874">To identify the IP address of the FSLvm, in a terminal in the FSLvm type: <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-1-11"></span><div class="highlight bash"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-a6c087a391c63aa9427fc226c92c9da73fc7b7b5" lang="en"><span class="line"><span class="anchor" id="line-1-12"></span>/sbin/ifconfig | grep -C 1 <span class="String">'eth0'</span></span>
</pre></div></div><span class="anchor" id="line-151"></span><p class="line862">You are looking for the dotted quartet printed after <tt class="backtick">inet&nbsp;addr:</tt>. <span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line874">Connection to the host is now possible using this address as the hostname to connect to within puTTY. <span class="anchor" id="line-154"></span>
<h1 id="Shutting_down">Shutting down</h1>
<span class="anchor" id="line-155"></span><p class="line862">Under normal circumstances you should just close the FSLvm window, this will suspend the FSLvm to disk allowing quick restoration of your session at a later date. However, sometimes it may be necessary to shutdown the FSLvm entirely (say if you are moving it to a new computer). To do this, choose <tt class="backtick">System</tt> &gt; <tt class="backtick">Shutdown</tt> from the Linux desktop menu. Once Linux has shut down VMware Player will exit. <span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><p class="line867">
<h1 id="Resetting_a_hung_FSLvm">Resetting a hung FSLvm</h1>
<span class="anchor" id="line-158"></span><p class="line862">If the FSLvm appears to have frozen, you can force a reset by selecting <tt class="backtick">Reset</tt> from the <tt class="backtick">Troubleshooting</tt> menu. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><p class="line867">
<h1 id="Updating_the_FSLvm">Updating the FSLvm</h1>
<span class="anchor" id="line-161"></span><p class="line874">From time to time the Linux vendor will issue security updates which in general should be installed to keep the FSLvm secure. <span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><p class="line874">When updates are available a message window will appear in the top right of the Linux desktop advising you of what updated packages are available. Clicking on the icon associated with this message will open the package update utility which can be used to update the system. You will be asked for the root password that you set when installing the FSLvm before being allowed to install these updates. <span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><p class="line867"><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><div class="warning"><span class="anchor" id="line-1-13"></span><p class="line867"><strong>Warning about kernel updates</strong> <span class="anchor" id="line-2-5"></span><span class="anchor" id="line-3-4"></span><p class="line862">Any updates listed as <tt class="backtick">kernel</tt> updates change the core of the operating system, and will result in the accelerated drivers installed in the FSLvm to cease to function. To restore this functionality it is necessary to update the vmware-tools, as this driver package is termed - updates to the VMware Player application will also include new versions of these drivers. <span class="anchor" id="line-4-1"></span><span class="anchor" id="toolsupgrade"></span> <span class="anchor" id="line-5-1"></span>
<h2 id="Updating_VMware_Tools">Updating VMware Tools</h2>
<span class="anchor" id="line-6-1"></span><p class="line862">To update the tools choose <tt class="backtick">Manage&nbsp;&gt;&nbsp;Install&nbsp;VMware&nbsp;Tools</tt> from the VMware Player menu, wait 30 seconds then open a terminal window in the FSLvm. Within this window type: <span class="anchor" id="line-7-1"></span><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span><span class="anchor" id="line-10-1"></span><span class="anchor" id="line-11-1"></span></pre></div><span class="anchor" id="line-178"></span><p class="line874">Enter your account password when requested. <span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><p class="line874">You will now be asked a series of questions. Hit return to accept the default to all of the questions. Once the installation is complete you should reboot the FSLvm to allow the changes to take effect. <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><p class="line867">
<h1 id="Increasing_the_amount_of_memory_available_to_FSLvm">Increasing the amount of memory available to FSLvm</h1>
<span class="anchor" id="line-183"></span><p class="line862">Right click on <tt class="backtick">My&nbsp;Computer</tt> in the Start menu and select <tt class="backtick">Properties...</tt> the window that opens will tell you how much your computer has. The default allocation of 2GB is only suitable for light use of the FSL software suite. For more demanding analyses you will need to increase the amount of available memory allocated to the virtual machine. Before you change this setting you should find out how much memory your computer has. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line874">With this in mind, you can calculate the amount of memory you can safely allocate to the FSLvm by following the advice below. <span class="anchor" id="line-186"></span><div><table class="'centred'"><tbody><tr>  <td></td>
  <td><p class="line862">Windows Vista/7</td>
  <td><p class="line862">Take 2048MB off the value reported</td>
</tr>
</tbody></table></div><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><p class="line874">By way of example if you have a Windows 7 computer with 8GB of RAM you can safely increase the FSLvm memory allocation to 6GB. <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><p class="line862">To change the memory allocation of FSLvm, start the VM and then from the VMware Player menu, choose <tt class="backtick">Manage&nbsp;&gt;&nbsp;Virtual&nbsp;Machine&nbsp;Settings...</tt>. In the dialogue that opens type the value you have calculated as being optimal into the memory total box - the memory section will suggest some values for you. As indicated in this window once you have clicked <tt class="backtick">OK</tt> you will need to restart the VM. <span class="anchor" id="line-191"></span><img alt="Changing the memory allocation" class="attachment" src="attachments/FslInstallation(2f)Windows/VMsettings.png" title="Changing the memory allocation" /> <span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><p class="line874">Increasing the size of the virtual disk is also possible, but not straightforward, so if you require additional disk space we would recommend adding an additional USB hard drive to your system and dedicating it's use to Linux. For correct FSL operation, the drive should be formatted with the Linux ext3 filesystem. Follow these steps to carry out this formatting process. <span class="anchor" id="line-194"></span><ol type="1"><li>Start with the drive disconnected <span class="anchor" id="line-195"></span></li><li>Click inside the running VM window so that you are controlling Linux <span class="anchor" id="line-196"></span></li><li>Connect the USB drive <span class="anchor" id="line-197"></span></li><li><p class="line862">If the drive mounts and appears on your Linux desktop, right click and choose to un-mount it. Most probably you will have a drive formatted as NTFS, so you may see this warning that Linux Cannot mount volume - Click <tt class="backtick">OK</tt>. <span class="anchor" id="line-198"></span>Unfortunately, Centos won't let you format the device at this point, so you need to format via the command line. <span class="anchor" id="line-199"></span></li><li>Open a terminal and become the root user: <span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><pre><span class="anchor" id="line-1-6"></span>su -</pre><span class="anchor" id="line-203"></span>(enter the root password when prompted) <span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><div class="warning"><span class="anchor" id="line-1-14"></span><p class="line867"><strong>Potential for data loss</strong> <span class="anchor" id="line-2-6"></span><span class="anchor" id="line-3-5"></span><p class="line874">The next step will destroy everything on the drive you specify, so make sure you are certain that this is the correct disk. </div><span class="anchor" id="line-209"></span></li><li>Run the partitioning tool: <span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><pre><span class="anchor" id="line-1-7"></span>parted</pre><span class="anchor" id="line-213"></span>You are now in an interactive partition editor. <span class="anchor" id="line-214"></span></li><li>Find your disk: <span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><pre><span class="anchor" id="line-1-8"></span>print all</pre><span class="anchor" id="line-218"></span><p class="line862">Locate your external drive (look for the <tt class="backtick">Model:</tt> entry that matches your disk) and note down the <tt class="backtick">Disk</tt> field (<tt class="backtick">/dev/sdX</tt>) (this will probably be <tt class="backtick">/dev/sdb</tt>) and the numbers of any existing partition number(s) <span class="anchor" id="line-219"></span></li><li><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><pre><span class="anchor" id="line-1-9"></span>select /dev/sdX</pre><span class="anchor" id="line-223"></span>(replace X with the letter you determined above) <span class="anchor" id="line-224"></span></li><li><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><pre><span class="anchor" id="line-1-10"></span>rm Y</pre><span class="anchor" id="line-228"></span>where Y is the partition number you noted. Repeat until you have deleted all the partitions on the disk <span class="anchor" id="line-229"></span></li><li><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><pre><span class="anchor" id="line-1-11"></span>print</pre><span class="anchor" id="line-233"></span>to confirm that they are all gone <span class="anchor" id="line-234"></span></li><li><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><pre><span class="anchor" id="line-1-12"></span>mkpart primary 1 ZGB</pre><span class="anchor" id="line-238"></span>where Z is the size of the disk in question (eg 250GB), hit return to any prompts <span class="anchor" id="line-239"></span></li><li><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><pre><span class="anchor" id="line-1-13"></span>quit</pre><span class="anchor" id="line-243"></span></li><li>Make a file system on the partition <span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><pre><span class="anchor" id="line-1-14"></span>mkfs -t ext3 /dev/sdX</pre><span class="anchor" id="line-247"></span>(X as above) <span class="anchor" id="line-248"></span></li><li><p class="line862">Disconnect the drive and reconnect it and it should automatically mount. Open <tt class="backtick">Computer</tt> on your desktop and you should see the drive, and it can be accessed at <tt class="backtick">/media/disk</tt> (or some variant on that). <span class="anchor" id="line-249"></span></li></ol><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2014-07-08 15:33
</body>
</html>
